
<!DOCTYPE html>
<html>
<head>
<title>Apply Scholarship</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    height:100vh;
    background: linear-gradient(135deg, #74ebd5, #ACB6E5);
    display:flex;
    justify-content:center;
    align-items:center;
}

.container {
    background: rgba(255,255,255,0.9);
    padding: 25px 30px;
    border-radius:15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    width:400px;
}

h2 { text-align:center; color:#2c3e50; margin-bottom:15px; }
input, select, textarea, button { width:100%; padding:10px; margin:6px 0; border-radius:5px; border:1px solid #ccc; box-sizing:border-box;}
textarea { resize: vertical; }
button { background:#3498db; color:white; border:none; cursor:pointer; font-weight:bold; transition:0.3s;}
button:hover { background:#2980b9;}
.page { text-align:center; font-size:12px; color:gray; margin-bottom:10px;}
</style>
</head>
<body>

<div class="container">
<div class="page">APPLICATION</div>
<h2>Apply Scholarship</h2>

<input id="name" placeholder="Full Name">
<input id="email" placeholder="Email">
<input id="contact" placeholder="Contact Number">
<input id="dob" type="date" placeholder="Date of Birth">
<input id="address" placeholder="Address">
<input id="course" placeholder="Course">
<select id="year">
  <option value="">Select Year Level</option>
  <option value="1st Year">1st Year</option>
  <option value="2nd Year">2nd Year</option>
  <option value="3rd Year">3rd Year</option>
  <option value="4th Year">4th Year</option>
</select>
<input id="gpa" placeholder="GPA">
<input id="document" placeholder="Document Filename">
<textarea id="remarks" placeholder="Remarks / Comments"></textarea>

<button id="submitBtn">Submit Application</button>
<button onclick="goStatus()">View Status</button>
</div>

<script>
let currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser || currentUser.role !== "student"){ alert("Only students can apply"); location.href="page1-welcome.html"; }

let editApp = JSON.parse(localStorage.getItem("editApp"));
if(editApp){
    document.getElementById("name").value = editApp.name || "";
    document.getElementById("email").value = editApp.email || "";
    document.getElementById("contact").value = editApp.contact || "";
    document.getElementById("dob").value = editApp.dob || "";
    document.getElementById("address").value = editApp.address || "";
    document.getElementById("course").value = editApp.course || "";
    document.getElementById("year").value = editApp.year || "";
    document.getElementById("gpa").value = editApp.gpa || "";
    document.getElementById("document").value = editApp.document || "";
    document.getElementById("remarks").value = editApp.remarks || "";
}

function submitApplication(){
    let apps = JSON.parse(localStorage.getItem("applications"));
    let newApp = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        contact: document.getElementById("contact").value,
        dob: document.getElementById("dob").value,
        address: document.getElementById("address").value,
        course: document.getElementById("course").value,
        year: document.getElementById("year").value,
        gpa: document.getElementById("gpa").value,
        document: document.getElementById("document").value,
        remarks: document.getElementById("remarks").value,
        status: editApp ? editApp.status : "Pending"
    };
    if(!newApp.name || !newApp.email || !newApp.course || !newApp.year || !newApp.gpa){
        alert("Please fill Name, Email, Course, Year, and GPA.");
        return;
    }
    if(editApp){
        let index = apps.findIndex(a => a.name === editApp.name && a.email === editApp.email);
        if(index !== -1){ apps[index] = newApp; }
        localStorage.removeItem("editApp");
    } else { apps.push(newApp); }
    localStorage.setItem("applications", JSON.stringify(apps));
    alert("Application submitted!");
    location.href="page3-status.html";
}

function goStatus(){ location.href="page3-status.html"; }
document.getElementById("submitBtn").onclick = submitApplication;
</script>

</body>
</html>